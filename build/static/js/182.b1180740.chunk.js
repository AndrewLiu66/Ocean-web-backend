(this["webpackJsonpmatx-react-pro"]=this["webpackJsonpmatx-react-pro"]||[]).push([[182],{1379:function(e,t,n){"use strict";n.r(t),n.d(t,"getContrastingBackgroundTheme",(function(){return k})),n.d(t,"getRenderSymbolParameters",(function(){return w})),n.d(t,"previewSymbol2D",(function(){return M}));var a=n(179),l=n(145),o=n(149),i=n(722),c=n(607),s=n(777);n(134);function u(e){let{r:t,g:n,b:l,a:o}=e;return o<1&&(t=Math.round(o*t+255*(1-o)),n=Math.round(o*n+255*(1-o)),l=Math.round(o*l+255*(1-o))),new a.a({r:t,g:n,b:l})}function r(e){const{r:t,g:n,b:a}=u(e);return.2126*t+.7152*n+.0722*a}const d="picture-fill",m=c.a.size,h=c.a.maxSize,p=c.a.maxOutlineSize,v=c.a.lineWidth,f=225,b=document.createElement("canvas");function y(e){const t=null===e||void 0===e?void 0:e.size;return{width:null!=t&&"object"==typeof t&&"width"in t?Object(o.c)(t.width):null,height:null!=t&&"object"==typeof t&&"height"in t?Object(o.c)(t.height):null}}function g(e,t){return e>t?"dark":"light"}function w(e,t){var n,a;const l="number"==typeof(null===t||void 0===t?void 0:t.size)?null===t||void 0===t?void 0:t.size:null,s=null!=l?Object(o.c)(l):null,u=null!=(null===t||void 0===t?void 0:t.maxSize)?Object(o.c)(t.maxSize):null,r=null!=(null===t||void 0===t?void 0:t.rotation)?t.rotation:"angle"in e?e.angle:null,f=Object(i.c)(e);let g=Object(i.e)(e);"dark"!==k(e,245)||(null===t||void 0===t?void 0:t.ignoreWhiteSymbols)||(g={width:.75,...g,color:"#bdc3c7"});const w={shape:null,fill:f,stroke:g,offset:[0,0]};(null===(n=g)||void 0===n?void 0:n.width)&&(g.width=Math.min(g.width,p));const M=(null===(a=g)||void 0===a?void 0:a.width)||0;let j=null!=(null===t||void 0===t?void 0:t.size)&&(null==(null===t||void 0===t?void 0:t.scale)||(null===t||void 0===t?void 0:t.scale)),x=0,O=0,z=!1;switch(e.type){case"simple-marker":{const t=e.style,n=Math.min(null!=s?s:Object(o.c)(e.size),u||h);switch(x=n,O=n,t){case"circle":w.shape={type:"circle",cx:0,cy:0,r:.5*n},j||(x+=M,O+=M);break;case"cross":w.shape={type:"path",path:[{command:"M",values:[0,.5*O]},{command:"L",values:[x,.5*O]},{command:"M",values:[.5*x,0]},{command:"L",values:[.5*x,O]}]};break;case"diamond":w.shape={type:"path",path:[{command:"M",values:[0,.5*O]},{command:"L",values:[.5*x,0]},{command:"L",values:[x,.5*O]},{command:"L",values:[.5*x,O]},{command:"Z",values:[]}]},j||(x+=M,O+=M);break;case"square":w.shape={type:"path",path:[{command:"M",values:[0,0]},{command:"L",values:[x,0]},{command:"L",values:[x,O]},{command:"L",values:[0,O]},{command:"Z",values:[]}]},j||(x+=M,O+=M),r&&(z=!0);break;case"triangle":w.shape={type:"path",path:[{command:"M",values:[.5*x,0]},{command:"L",values:[x,O]},{command:"L",values:[0,O]},{command:"Z",values:[]}]},j||(x+=M,O+=M),r&&(z=!0);break;case"x":w.shape={type:"path",path:[{command:"M",values:[0,0]},{command:"L",values:[x,O]},{command:"M",values:[x,0]},{command:"L",values:[0,O]}]},r&&(z=!0);break;case"path":w.shape={type:"path",path:e.path||""},j||(x+=M,O+=M),r&&(z=!0),j=!0}break}case"simple-line":{var L;const{width:e,height:n}=y(t),a=null!=n?n:Math.min(null!=s?s:M,u||p),l=null!=e?e:v;g.width=a,x=l,O=a;const o=(null===w||void 0===w||null===(L=w.stroke)||void 0===L?void 0:L.cap)||"butt",i="round"===o;j=!0,w.stroke.cap="butt"===o?"square":o,w.shape={type:"path",path:[{command:"M",values:[i?a/2:0,O/2]},{command:"L",values:[i?x-a/2:x,O/2]}]};break}case d:case"simple-fill":{const e="object"==typeof(null===t||void 0===t?void 0:t.symbolConfig)&&(null===t||void 0===t?void 0:t.symbolConfig.isSquareFill),{width:n,height:a}=y(t);x=e&&null!=n?n:null!=s?s:m,O=e&&null!=a?a:x,j||(x+=M,O+=M),j=!0,w.shape=e?{type:"path",path:[{command:"M",values:[0,0]},{command:"L",values:[x,0]},{command:"L",values:[x,O]},{command:"L",values:[0,O]},{command:"L",values:[0,0]},{command:"Z",values:[]}]}:c.m.fill[0];break}case"picture-marker":{let t=Object(o.c)(e.width),n=Object(o.c)(e.height);const a=null!=s?s:Math.max(t,n),l=t/n;t=l<=1?Math.ceil(a*l):a,n=l<=1?a:Math.ceil(a/l),x=Math.min(t,u||h),O=Math.min(n,u||h),w.shape={type:"image",x:-Math.round(x/2),y:-Math.round(O/2),width:x,height:O,src:e.url||""},r&&(z=!0);break}case"text":{const t=e,n=t.text||"Aa",a=t.font,l=Math.min(null!=s?s:Object(o.c)(a.size),u||h),i=function(e,t){const n=b.getContext("2d"),a=[];return t&&(t.weight&&a.push(t.weight),t.size&&a.push(t.size+"px"),t.family&&a.push(t.family)),n.font=a.join(" "),n.measureText(e).width}(n,{weight:a.weight,size:l,family:a.family}),c=/[\uE600-\uE6FF]/.test(n);x=c?l:i,O=l;let r=.25*function(e){if(0===e.length)return 0;if(e.length>2){const t=Object(o.d)(1),n=parseFloat(e);switch(e.slice(-2)){case"px":return n;case"pt":return n*t;case"in":return 72*n*t;case"pc":return 12*n*t;case"mm":return 2.8346456692913384*n*t;case"cm":return 28.346456692913385*n*t}}return parseFloat(e)}((a?l:0).toString());c&&(r+=5),w.shape={type:"text",text:n,x:t.xoffset||0,y:t.yoffset||r,align:"middle",alignBaseline:t.verticalAlignment,decoration:a&&a.decoration,rotated:t.rotated,kerning:t.kerning},w.font=a&&{size:l,style:a.style,decoration:a.decoration,weight:a.weight,family:a.family};break}}return{shapeDescriptor:w,size:[x,O],renderOptions:{node:null===t||void 0===t?void 0:t.node,scale:j,opacity:null===t||void 0===t?void 0:t.opacity,rotation:r,useRotationSize:z,effectView:null===t||void 0===t?void 0:t.effectView}}}async function M(e,t){const{shapeDescriptor:n,size:a,renderOptions:o}=w(e,t);if(!n.shape)throw new l.a("symbolPreview: renderPreviewHTML2D","symbol not supported.");await async function(e,t){const n=t.fill,a=e.color;if("pattern"===(null===n||void 0===n?void 0:n.type)&&a&&e.type!==d){const e=await Object(i.d)(n.src,a.toCss(!0));n.src=e,t.fill=n}}(e,n);const u=[[n]];if("object"==typeof(null===t||void 0===t?void 0:t.symbolConfig)&&null!==t&&void 0!==t&&t.symbolConfig.applyColorModulation){const e=.6*a[0];u.unshift([{...n,offset:[-e,0],fill:Object(c.b)(n.fill,-.3)}]),u.push([{...n,offset:[e,0],fill:Object(c.b)(n.fill,.3)}]),a[0]+=2*e,o.scale=!1}return Object(s.a)(u,a,o)}function k(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:f;const n=Object(i.c)(e),l=Object(i.e)(e),o=!n||"type"in n?null:new a.a(n),c=null!==l&&void 0!==l&&l.color?new a.a(null===l||void 0===l?void 0:l.color):null,s=o?g(r(o),t):null,u=c?g(r(c),t):null;return u?s?s===u?s:t>=f?"light":"dark":u:s}}}]);