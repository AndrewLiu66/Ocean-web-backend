(this["webpackJsonpmatx-react-pro"]=this["webpackJsonpmatx-react-pro"]||[]).push([[91],{1085:function(e,t){function a(e){return Promise.resolve().then((function(){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}))}a.keys=function(){return[]},a.resolve=a,e.exports=a,a.id=1085},1337:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(1198),i=a(1199),l=a(335),o=a(984),s=a(209),d=a(34),p=a(1354),b=a(1357),m=a(1358),u=a(1359),h=a(1351),j=a(1332),x=a(1347),g=a(1352),O=a(122),f=a(112),y=a(114),S=a(23);a(1348);const v=e=>{if(e.match("rgba")){return e.slice(5).split(",").slice(0,-1).join(",")}let t;if(/^#([A-Fa-f0-9]{3}){1,2}$/.test(e))return t=e.substring(1).split(""),3===t.length&&(t=[t[0],t[0],t[1],t[1],t[2],t[2]]),t="0x"+t.join(""),[t>>16&255,t>>8&255,255&t].join(",")};const w=function(e,t,a){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"";return"CTD"===n?e+"-CTD-"+t+"-"+a:e+"-"+t+"-"+a};var k=a(59),D=a(1217),C=a(1212),T=a(40),B=a(1350),L=a(1181),F=a.n(L),E=a(41),H=a.n(E),I=a(991),N=a.n(I),V=a(1086);const q=[{label:"date",key:"date"},{label:"min",key:"min"},{label:"firstQuartile",key:"firstQuartile"},{label:"median",key:"median"},{label:"thirdQuartile",key:"thirdQuartile"},{label:"max",key:"max"}],z=[{label:"Frequency",key:"Frequency"},{label:"Level 1",key:"Level 1"},{label:"Level 5",key:"Level 5"},{label:"Level 10",key:"Level 10"},{label:"Level 50",key:"Level 50"},{label:"Level 90",key:"Level 90"},{label:"Level 95",key:"Level 95"},{label:"Level 99",key:"Level 99"}];var M=a(3);const P=Object(f.a)(p.a)((e=>{let{theme:t}=e;return{width:"130px",marginRight:"10px",backgroundColor:"#008255",[t.breakpoints.down("sm")]:{fontSize:"12px"}}}));var G=e=>{let{error:t,startDate:a,endDate:r,location:c,frequency:i,currType:l,setLoading:o,currentLocation:s,selectedValue:d}=e;const[p,b]=Object(n.useState)([]),m=Object(n.useRef)(null);return Object(M.jsxs)(n.Fragment,{children:[Object(M.jsxs)(P,{disabled:"error"===t||"CTD"===d,variant:"contained",component:"span",onClick:()=>{o(!0),H.a.post("/api/downloads",{startDate:a,endDate:r,location:c,currType:l,frequency:i,selectedValue:d}).then((e=>{o(!1),b(e.data.data),m.current.link.click()}))},sx:{backgroundColor:"#008255"},children:[Object(M.jsx)(N.a,{sx:{mr:1}}),"CSV"]}),Object(M.jsx)(V.CSVLink,{data:p,filename:w(s,a,r),className:"hidden",ref:m,target:"_blank",headers:(()=>{switch(l){case"Octave Band":return q;case"SPDF":return z;default:return[{label:"time",key:"time"},{label:"frequency",key:"frequency"},{label:s,key:c}]}})()})]})},R=a(1329),Y=a(992);const _=Object(f.a)(y.a)((e=>{let{theme:t}=e;return{display:"flex",height:"100%",marginBottom:"-10px",flexDirection:"column",position:"relative",[t.breakpoints.down("md")]:{marginBottom:"20px"}}})),{RangePicker:A}=(Object(f.a)(y.a)((e=>{let{theme:t}=e;return{color:"#696665",position:"absolute",width:"350px",bottom:"-19px",fontSize:"12px",[t.breakpoints.down("md")]:{bottom:"-14px"}}})),R.a);var W=e=>{let{startDate:t,endDate:a,setError:n,setStartDate:r,setEndDate:c,selectedValue:i}=e;return Object(M.jsx)(_,{style:{width:"100%"},children:Object(M.jsx)(A,{size:"large",disabled:"Spec"===i?[!1,!1]:[!0,!0],showTime:{hideDisabledOptions:!0},defaultValue:[Y(t),Y(a)],value:[Y(t),Y(a)],format:"YYYY-MM-DD HH",onCalendarChange:(e,i,l)=>{if(""!==i[1]){const t=e[1].diff(e[0],"months");n(t>=1?"error":"")}if(""===i[1]||i[0]!==t&&i[1]===a){const e=Y(i[0]).add(1,"M").add(23,"hours"),t=Y(e._d);r(i[0]),c(t.format("YYYY-MM-DD HH"))}else r(i[0]),c(i[1])},disabledDate:e=>e&&(e<Y.utc([2015,0,14])||e>Y.utc([2020,11,31])),allowClear:!1})})},Q=a(1179),U=a.n(Q);const J=Object(f.a)(p.a)((e=>{let{theme:t}=e;return{width:"130px",marginRight:"10px",backgroundColor:"#008255",[t.breakpoints.down("sm")]:{fontSize:"12px"}}}));var K=e=>{let{currType:t,image:a,setLoading:n,startDate:r,endDate:c,location:i,frequency:l,selectedValue:o}=e;const s=w(i,r,c,o);return Object(M.jsxs)(J,{variant:"contained",onClick:()=>{if("SPDF"===t){const e="data:image/jpeg;base64,".concat(a),t=document.createElement("a");t.href=e,t.download="".concat(s,".png"),t.click()}else"CTD"===o&&(t="CTD"),n(!0),H()({method:"post",url:"/api/downloadPng",responseType:"blob",data:{startDate:r,endDate:c,location:i,currType:t,frequency:l}}).then((e=>{n(!1),U()(e.data,"".concat(s,".png"))}))},children:[Object(M.jsx)(N.a,{sx:{mr:1}}),"PNG"]})},$=a(1349),X=a(1362),Z=a(1363),ee=a(1182),te=a.n(ee),ae=a(528),ne=a(1336);const re=Object(f.a)(y.a)((()=>({display:"flex",alignItems:"center"})));function ce(e){let{selectedValue:t,setSelectedValue:a}=e;const n=e=>{a(e.target.value)};return Object(M.jsxs)(re,{children:[Object(M.jsx)(ne.a,{checked:"Spec"===t,onChange:n,value:"Spec",name:"radio-buttons",inputProps:{"aria-label":"Spec"}}),Object(M.jsx)("div",{children:"Spec"}),Object(M.jsx)(ne.a,{checked:"CTD"===t,onChange:n,value:"CTD",name:"radio-buttons",inputProps:{"aria-label":"CTD"}}),Object(M.jsx)("div",{children:"CTD"})]})}const ie=Object(f.a)($.a)((()=>({"& .MuiAccordionSummary-content":{display:"none"},"& .Mui-expanded":{display:"none",height:0,minHeight:0}}))),le=Object(f.a)(y.a)((e=>{let{theme:t}=e;return{display:"flex",alignItems:"center",justifyContent:"center",margin:"24px !important",marginTop:"0px !important",[t.breakpoints.down("xl")]:{justifyContent:"flex-start"}}})),oe=Object(f.a)(y.a)((()=>({display:"flex",alignItems:"center","&:hover":{cursor:"pointer"}}))),se=Object(f.a)(p.a)((e=>{let{theme:t}=e;return{width:"130px",marginRight:"10px",backgroundColor:"#008255",[t.breakpoints.down("sm")]:{fontSize:"12px"}}})),de=Object(f.a)(y.a)((e=>{let{theme:t}=e;return{position:"fixed",display:"flex",zIndex:200,backgroundColor:"#FFFFFF",alignItems:"center",width:"inherit",padding:".8rem 1.25rem",justifyContent:"space-between",borderBottom:"1px solid ".concat("rgba(".concat(v(t.palette.text.disabled),", 0.2)"))}})),pe=Object(f.a)(D.a)((e=>{let{theme:t}=e;return{[t.breakpoints.down("lg")]:{width:"90%",height:"80%"},[t.breakpoints.down("md")]:{width:"95%",height:"80%"},[t.breakpoints.down("sm")]:{width:"90vw",height:"85vh"},"& .showGraph":{display:"block"},"& .hideGraph":{display:"none"}}})),be=Object(f.a)("img")((e=>{let{theme:t}=e;return{borderRadius:"4px",[t.breakpoints.down("sm")]:{width:"110%"}}})),me=Object(f.a)("div")((()=>({fontSize:"16px",fontWeight:"500",lineHeight:"1.5"}))),ue=e=>{let{currentLocation:t,open:a,handleClose:c}=e;const[i,l]=Object(n.useState)("2018-03-01 00"),[o,s]=Object(n.useState)("2018-03-02 23"),{palette:p}=Object(S.a)(),f=Object(k.b)(),v=p.text.primary,[w,D]=Object(n.useState)("Spectrogram"),[L,E]=Object(n.useState)("Spectrogram"),{initSpecGraph:H}=Object(k.c)((e=>e.graph)),{initCtpGraph:I}=Object(k.c)((e=>e.graph)),[N,V]=Object(n.useState)(!1),[q,z]=Object(n.useState)(""),[P,R]=Object(n.useState)(50),[Y,_]=Object(n.useState)(""),A=(e=>e.replace(" ","_").toLowerCase())(t),Q=Object(n.useRef)(null),[U,J]=r.a.useState("Spec");Object(n.useEffect)((()=>{V(!0),"Oregon Offshore"!==t&&"Oregon Slope"!==t&&"Oregon Shelf"!==t&&(async()=>{await f(Object(T.e)(i,o,A))})(),(async()=>{await f(Object(T.d)(A))})()}),[t]),Object(n.useEffect)((()=>{if(0!==Object.keys(I).length){const e=document.getElementById("outer2"),t=document.createElement("div");return t.setAttribute("id","graphBox2"),e.appendChild(t),window.Bokeh.embed.embed_item(I,"graphBox2"),()=>{if(document.getElementById("graphBox2")){document.getElementById("graphBox2").remove()}}}}),[I]),Object(n.useEffect)((()=>{if("Spectrogram"===w||"Octave Band"===w){if(0!==Object.keys(H).length){V(!1);const e=document.getElementById("outer"),t=document.createElement("div");return t.setAttribute("id","graphBox"),e.appendChild(t),window.Bokeh.embed.embed_item(H,"graphBox"),()=>{if(document.getElementById("graphBox")){document.getElementById("graphBox").remove()}}}}else if("SPDF"===w){V(!1);let e=H.image.split("'")[1];z(e)}}),[H]);const $=()=>P<1||P>80;return Object(M.jsx)(B.a,{open:a,sx:{zIndex:101},children:Object(M.jsxs)(pe,{sx:{width:"85%",height:"80%",overflow:"scroll"},children:[Object(M.jsxs)(de,{children:[Object(M.jsxs)(me,{children:[t," Hydrophone Visualization"]}),Object(M.jsx)(b.a,{onClick:c,children:Object(M.jsx)(m.a,{sx:{color:v},children:"close"})})]}),Object(M.jsxs)(C.a,{container:!0,spacing:1,p:4,pb:0,mt:7,mb:2,sx:{"& .MuiTextField-root":{width:"100%"}},children:[Object(M.jsx)(C.a,{item:!0,lg:12,md:12,sm:12,xs:12,children:Object(M.jsx)(ce,{selectedValue:U,setSelectedValue:J})}),"Oregon Offshore"!==t&&"Oregon Slope"!==t&&"Oregon Shelf"!==t&&Object(M.jsxs)(M.Fragment,{children:[Object(M.jsx)(C.a,{item:!0,lg:4,md:6,sm:12,xs:12,display:"flex",alignItems:"center",pt:0,sx:{height:"70px"},children:Object(M.jsx)(W,{startDate:i,endDate:o,graphType:L,setError:_,setStartDate:l,setEndDate:s,selectedValue:U})}),"Spec"===U&&Object(M.jsx)(C.a,{item:!0,lg:3,md:3,sm:6,xs:12,children:Object(M.jsxs)(u.a,{fullWidth:!0,sx:{mb:1,width:"100%"},children:[Object(M.jsx)(h.a,{id:"demo-simple-select-label",children:"Type"}),Object(M.jsxs)(j.a,{labelId:"demo-simple-select-label",id:"demo-simple-select",value:L,label:"Type",defaultValue:"Spectrogram",onChange:e=>{E(e.target.value)},children:[Object(M.jsx)(x.a,{value:"Spectrogram",children:"Spectrogram"}),Object(M.jsx)(x.a,{value:"SPDF",children:"SPDF"}),Object(M.jsx)(x.a,{value:"Octave Band",children:"Octave Band"})]})]})}),"Spec"===U&&Object(M.jsx)(C.a,{item:!0,lg:3,md:3,sm:6,xs:12,children:Object(M.jsx)(g.a,{error:$(),helperText:$()&&"Frequency not in valid range",disabled:"Octave Band"!==L,required:!0,value:P,id:"outlined-required",label:"Required frequency 1-80",onChange:e=>{R(e.target.value)}})})]})]}),"Oregon Offshore"!==t&&"Oregon Slope"!==t&&"Oregon Shelf"!==t?Object(M.jsxs)(M.Fragment,{children:[Object(M.jsx)(C.a,{container:!0,spacing:1,p:4,pt:1,children:Object(M.jsxs)(C.a,{item:!0,lg:12,md:12,sm:12,xs:12,children:[Object(M.jsxs)(oe,{children:[Object(M.jsxs)(se,{disabled:$()||"CTD"===U,variant:"contained",component:"span",onClick:()=>{V(!0),D(L),f(Object(T.f)(i,o,L,A,P))},children:[Object(M.jsx)(F.a,{sx:{mr:1}}),"Update"]}),Object(M.jsx)(G,{error:Y,startDate:i,endDate:o,frequency:P,currType:w,setLoading:V,location:A,currentLocation:t,selectedValue:U}),Object(M.jsx)(K,{currType:w,image:q,setLoading:V,startDate:i,endDate:o,location:A,frequency:P,selectedValue:U}),Object(M.jsxs)(oe,{onClick:()=>{Q.current.click()},children:[Object(M.jsx)(b.a,{children:Object(M.jsx)(te.a,{})}),"Spec"===U&&Object(M.jsxs)(ae.d,{sx:{ml:"-2px",fontWeight:"400"},children:["How is ",w," generated?"]}),"CTD"===U&&Object(M.jsx)(ae.d,{sx:{ml:"-2px",fontWeight:"400"},children:"How is CTD generated?"})]})]}),Object(M.jsxs)(ie,{sx:{marginTop:"15px",color:"success.main","& .MuiSlider-thumb":{borderRadius:"1px"}},children:[Object(M.jsx)(X.a,{"aria-controls":"panel1a-content",ref:Q,id:"panel1a-header",sx:{height:0,minHeight:0,maxHeight:0,"& .MuiSlider-thumb":{borderRadius:"1px"}}}),Object(M.jsxs)(Z.a,{children:[Object(M.jsx)(ae.c,{sx:{color:"#696665"},children:"How each type of graph is generated?"}),Object(M.jsx)(ae.d,{sx:{color:"#696665"},children:"Stay tuned, more contents are coming"})]})]})]})}),Object(M.jsxs)(C.a,{container:!0,children:[N&&Object(M.jsx)(C.a,{item:!0,lg:12,md:12,sm:12,xs:12,alignItems:"center",justifyContent:"center",textAlign:"center",mb:"20px",children:Object(M.jsx)(O.a,{size:24,className:"buttonProgress"})}),"SPDF"===w&&""!==q&&"Spec"===U&&Object(M.jsx)(C.a,{item:!0,lg:12,md:12,sm:12,xs:12,children:Object(M.jsx)(le,{children:Object(M.jsx)(be,{src:"data:image/jpg;base64,".concat(q)})})})]})]}):Object(M.jsx)(y.a,{}),Object(M.jsx)(C.a,{container:!0,children:Object(M.jsx)(C.a,{item:!0,lg:12,md:12,sm:12,xs:12,children:Object(M.jsx)(le,{style:{overflow:"auto"},children:("Spectrogram"===w||"Octave Band"===w)&&Object(M.jsx)(y.a,{id:"outer",className:Object(d.a)("Spec"===U?"showGraph":"hideGraph")})})})}),Object(M.jsx)(C.a,{container:!0,children:Object(M.jsx)(C.a,{item:!0,lg:12,md:12,sm:12,xs:12,children:Object(M.jsx)(le,{style:{overflow:"auto"},children:Object(M.jsx)(y.a,{id:"outer2",className:Object(d.a)("CTD"===U?"showGraph":"hideGraph")})})})})]})})};var he=r.a.memo(ue);const je=Object(f.a)(y.a)((()=>({padding:0,margin:0,height:"100%",width:"100%"}))),xe=[{location:"Slope Base",latitude:44.5153,longitude:-125.39},{location:"Axial Base",latitude:45.8168,longitude:-129.754},{location:"Southern Hydrate",latitude:44.5691,longitude:-125.1479},{location:"Central Caldera",latitude:45.9546,longitude:-130.0089},{location:"Eastern Caldera",latitude:45.9396,longitude:-129.9738},{location:"Oregon Slope",latitude:44.529,longitude:-125.3893},{location:"Oregon Offshore",latitude:44.3695,longitude:-124.954},{location:"Oregon Shelf",latitude:44.6371,longitude:-124.306}];var ge=function(){const e=Object(n.useRef)(null),{graphList:t=[]}=Object(k.c)((e=>e.graph)),[a,r]=Object(n.useState)(!1),[d,p]=Object(n.useState)(""),b=Object(k.b)(),m=Object(n.useCallback)(((e,t)=>{r(e),p(t)}),[]);return Object(n.useEffect)((()=>{if(e.current){l.a.apiKey="AAPK460c081ffc584c5090c2b383ede3366b1JA6FLMBYno7qMVVlHo12K6EOAtFnfYV_6UQH2_bUGzYM0qQIBxyfrSfrVF8mJM8";const t=new i.a({portalItem:{id:"aa1d3f80270146208328cf66d022e09c"},basemap:"arcgis-oceans"}),a=new o.a;t.add(a),xe.forEach((e=>{const t={title:"Get Info",id:"show_popup",location:e.location},n={type:"point",longitude:e.longitude,latitude:e.latitude},r={title:"{Name}",content:"<div>I am a Hydrophone</div>",actions:[t]},c={Name:e.location,Description:"I am a hydrophone"},i=new s.a({geometry:n,symbol:{type:"simple-marker",color:[226,119,40],outline:{color:[255,255,255],width:1}},attributes:c,popupTemplate:r});a.add(i)}));new c.a({container:e.current,map:t,center:[-127,45],zoom:8}).popup.on("trigger-action",(e=>{"show_popup"===e.action.id&&(p(e.action.location),m(!0,e.action.location))}))}}),[]),Object(M.jsxs)(n.Fragment,{children:[Object(M.jsx)(je,{className:"mapDiv",ref:e}),a&&Object(M.jsx)(he,{currentLocation:d,graphData:t,handleClose:()=>{r(!1),b({type:T.b,payload:{}})},open:a})]})};t.default=()=>Object(M.jsx)(ge,{})},528:function(e,t,a){"use strict";a.d(t,"a",(function(){return o})),a.d(t,"b",(function(){return s})),a.d(t,"c",(function(){return d})),a.d(t,"d",(function(){return p})),a.d(t,"e",(function(){return b}));var n=a(34),r=(a(0),a(33)),c=a(1180),i=a(3);const l=Object(r.a)(c.a)((e=>{let{theme:t,textTransformStyle:a,ellipsis:n}=e;return{textTransform:a||"none",whiteSpace:n?"nowrap":"normal",overflow:n?"hidden":"",textOverflow:n?"ellipsis":""}})),o=e=>{let{children:t,className:a,ellipsis:r,textTransform:c,...o}=e;return Object(i.jsx)(l,{textTransformStyle:c,ellipsis:r,className:Object(n.a)({[a||""]:!0}),component:"h2",mb:0,mt:0,fontSize:"24px",fontWeight:"500",lineHeight:"1.5",...o,children:t})},s=e=>{let{children:t,className:a,ellipsis:r,textTransform:c,...o}=e;return Object(i.jsx)(l,{textTransformStyle:c,ellipsis:r,className:Object(n.a)({[a||""]:!0}),component:"h4",mb:0,mt:0,fontSize:"16px",fontWeight:"500",lineHeight:"1.5",...o,children:t})},d=e=>{let{children:t,className:a,ellipsis:r,textTransform:c,...o}=e;return Object(i.jsx)(l,{textTransformStyle:c,ellipsis:r,className:Object(n.a)({[a||""]:!0}),component:"h5",mb:0,mt:0,fontSize:"14px",fontWeight:"500",lineHeight:"1.5",...o,children:t})},p=e=>{let{children:t,className:a,ellipsis:r,textTransform:c,...o}=e;return Object(i.jsx)(l,{textTransformStyle:c,ellipsis:r,className:Object(n.a)({[a||""]:!0}),component:"p",mb:0,mt:0,fontSize:"14px",...o,children:t})},b=e=>{let{children:t,className:a,ellipsis:r,textTransform:c,...o}=e;return Object(i.jsx)(l,{textTransformStyle:c,ellipsis:r,className:Object(n.a)({[a||""]:!0}),component:"span",lineHeight:"1.5",...o,children:t})}}}]);