(this["webpackJsonpmatx-react-pro"]=this["webpackJsonpmatx-react-pro"]||[]).push([[6],{152:function(e,t,a){"use strict";a.d(t,"a",(function(){return n}));a(184);const n=e=>{if(e.match("rgba")){return e.slice(5).split(",").slice(0,-1).join(",")}let t;if(/^#([A-Fa-f0-9]{3}){1,2}$/.test(e))return t=e.substring(1).split(""),3===t.length&&(t=[t[0],t[0],t[1],t[1],t[2],t[2]]),t="0x"+t.join(""),[t>>16&255,t>>8&255,255&t].join(",")}},266:function(e,t,a){"use strict";a.r(t);var n=a(0),c=a.n(n),i=a(109),o=a(262),s=a(57),l=a(270),r=a(271),d=a(260),j=a(274),b=a(261),u=a(253),x=a(257),m=a(117),p=a(107),h=a(23),g=a(152),O=a(268),f=a(264),v=a(252),y=a(197),w=a(251),S=a(49),C=a(263),D=a(51),k=a.n(D),B=a(194),I=a.n(B),z=a(193),E=a.n(z),F=a(185),T=a(3);const P=Object(p.a)(i.a)((()=>({display:"flex",alignItems:"center",justifyContent:"center",margin:"24px !important",marginTop:"0px !important"}))),A=Object(p.a)(i.a)((()=>({display:"flex",alignItems:"center"}))),q=Object(p.a)(o.a)((e=>{let{theme:t}=e;return{width:"130px",marginRight:"10px",[t.breakpoints.down("sm")]:{fontSize:"12px"}}})),L=Object(p.a)(i.a)((e=>{let{theme:t}=e;return{display:"flex",alignItems:"center",width:"100%",padding:".8rem 1.25rem",justifyContent:"space-between",borderBottom:"1px solid ".concat("rgba(".concat(Object(g.a)(t.palette.text.disabled),", 0.2)"))}})),N=Object(p.a)(O.a)((e=>{let{theme:t}=e;return{[t.breakpoints.down("lg")]:{width:"70%",height:"60%"},[t.breakpoints.down("md")]:{width:"80%",height:"70%"},[t.breakpoints.down("sm")]:{width:"90vw",height:"85vh"}}})),V=Object(p.a)("img")((e=>{let{theme:t}=e;return{borderRadius:"4px",[t.breakpoints.down("sm")]:{width:"110%"}}})),H=Object(p.a)("div")((()=>({fontSize:"16px",fontWeight:"500",lineHeight:"1.5"}))),M=Object(p.a)("a")((()=>({display:"flex"})));var G=e=>{let{currentLocation:t,open:a,handleClose:c}=e;const[i,o]=Object(n.useState)(new Date(2018,1,1)),[p,g]=Object(n.useState)(new Date(2018,1,3)),{palette:O}=Object(h.a)(),D=Object(s.b)(),B=O.text.primary,[z,G]=Object(n.useState)("Spectrogram"),[J,_]=Object(n.useState)("Spectrogram"),{initGraph:R}=Object(s.c)((e=>e.graph)),[W,Y]=Object(n.useState)(!1),[K,Z]=Object(n.useState)(""),[U,$]=Object(n.useState)(50);Object(n.useEffect)((()=>{Y(!0);const e=t.replace(" ","_").toLowerCase();!async function(){await D(Object(S.c)(i,p,e))}()}),[]),Object(n.useEffect)((()=>{if("Spectrogram"===z||"Octave Band"===z){if(0!==Object.keys(R).length){Y(!1);const e=document.getElementById("outer"),t=document.createElement("div");return t.setAttribute("id","graphBox"),e.appendChild(t),window.Bokeh.embed.embed_item(R,"graphBox"),()=>{if(document.getElementById("graphBox")){document.getElementById("graphBox").remove()}}}}else if("SPDF"===z){Y(!1);let e=R.image.split("'")[1];Z(e)}}),[R]);const Q=e=>e.getFullYear()+"/"+(e.getMonth()+1)+"/"+e.getDate(),X={fieldSeparator:",",filename:"".concat(t+"-"+z+"-"+Q(i)+"-"+Q(p)),quoteStrings:'"',decimalSeparator:".",showLabels:!0,showTitle:!1,useTextFile:!1,useBom:!0,useKeysAsHeaders:!0};return Object(T.jsx)(C.a,{open:a,sx:{zIndex:101},children:Object(T.jsxs)(N,{sx:{width:"60%",height:"68%",overflow:"scroll"},children:[Object(T.jsxs)(L,{children:[Object(T.jsxs)(H,{children:[t," Hydrophone Visualization"]}),Object(T.jsx)(l.a,{onClick:c,children:Object(T.jsx)(r.a,{sx:{color:B},children:"close"})})]}),Object(T.jsxs)(f.a,{container:!0,spacing:1,p:4,pb:0,sx:{"& .MuiTextField-root":{mb:1,width:"100%"}},children:[Object(T.jsx)(f.a,{item:!0,lg:3,md:3,sm:6,xs:12,children:Object(T.jsx)(y.a,{dateAdapter:v.a,children:Object(T.jsx)(w.a,{label:"Start Date",value:i,onChange:e=>{o(e)},minDate:new Date(2015,0,14),maxDate:new Date(2020,11,31),renderInput:e=>Object(T.jsx)(d.a,{...e})})})}),Object(T.jsx)(f.a,{item:!0,lg:3,md:3,sm:6,xs:12,children:Object(T.jsx)(y.a,{dateAdapter:v.a,children:Object(T.jsx)(w.a,{label:"End Date",value:p,onChange:e=>{g(e)},minDate:new Date(2015,0,14),maxDate:new Date(2020,11,31),renderInput:e=>Object(T.jsx)(d.a,{...e})})})}),Object(T.jsx)(f.a,{item:!0,lg:3,md:3,sm:6,xs:12,children:Object(T.jsxs)(j.a,{fullWidth:!0,sx:{mb:1,width:"100%"},children:[Object(T.jsx)(b.a,{id:"demo-simple-select-label",children:"Type"}),Object(T.jsxs)(u.a,{labelId:"demo-simple-select-label",id:"demo-simple-select",value:J,label:"Type",defaultValue:"Spectrogram",onChange:e=>{_(e.target.value)},children:[Object(T.jsx)(x.a,{value:"Spectrogram",children:"Spectrogram"}),Object(T.jsx)(x.a,{value:"SPDF",children:"SPDF"}),Object(T.jsx)(x.a,{value:"Octave Band",children:"Octave Band"})]})]})}),Object(T.jsx)(f.a,{item:!0,lg:3,md:3,sm:6,xs:12,children:"Octave Band"===J?Object(T.jsx)(d.a,{required:!0,value:U,id:"outlined-required",label:"Required frequency",onChange:e=>{$(e.target.value)}}):Object(T.jsx)(d.a,{disabled:!0,defaultValue:"0",id:"outlined-required",label:"No frequency needed"})})]}),Object(T.jsx)(f.a,{container:!0,spacing:1,p:4,pt:1,children:Object(T.jsx)(f.a,{item:!0,lg:6,md:6,sm:12,xs:12,children:Object(T.jsxs)(A,{children:[Object(T.jsxs)(q,{variant:"contained",component:"span",onClick:()=>{Y(!0),G(J);let e=i.getFullYear()+"-"+(i.getMonth()+1)+"-"+i.getDate(),a=p.getFullYear()+"-"+(p.getMonth()+1)+"-"+p.getDate();const n=t.replace(" ","_").toLowerCase();D(Object(S.d)(e,a,J,n,U))},children:[Object(T.jsx)(E.a,{sx:{mr:1}}),"Update"]}),Object(T.jsxs)(q,{variant:"contained",component:"span",onClick:()=>(()=>{const e=t.replace(" ","_").toLowerCase();console.log(z),k.a.post("/api/downloads",{startDate:i,endDate:p,location:e,currType:z,frequency:U}).then((e=>{const t=new F.ExportToCsv(X);console.log(e.data.data),t.generateCsv(e.data.data)}))})(),sx:{backgroundColor:"#008255"},children:[Object(T.jsx)(I.a,{sx:{mr:1}}),"CSV"]}),"SPDF"===z&&"SPDF"===J&&!1===W?Object(T.jsx)(q,{variant:"contained",sx:{backgroundColor:"#008255"},children:Object(T.jsxs)(M,{href:"data:image/jpeg;base64,".concat(K),download:"".concat(t+"-"+z+"-"+Q(i)+"-"+Q(p),".jpg"),children:[Object(T.jsx)(I.a,{sx:{mr:1}}),"JPG"]})}):Object(T.jsxs)(q,{disabled:!0,variant:"contained",sx:{backgroundColor:"#21b6ae"},children:[Object(T.jsx)(I.a,{sx:{mr:1}}),"JPG"]})]})})}),Object(T.jsxs)(f.a,{container:!0,children:[W&&Object(T.jsx)(f.a,{item:!0,lg:12,md:12,sm:12,xs:12,alignItems:"center",justifyContent:"center",textAlign:"center",mb:"20px",children:Object(T.jsx)(m.a,{size:24,className:"buttonProgress"})}),Object(T.jsx)(f.a,{item:!0,lg:12,md:12,sm:12,xs:12,children:"SPDF"===z&&""!==K&&Object(T.jsx)(P,{children:Object(T.jsx)(V,{src:"data:image/jpg;base64,".concat(K)})})})]}),("Spectrogram"===z||"Octave Band"===z)&&Object(T.jsx)(P,{sx:{overflow:"auto"},id:"outer"})]})})},J=a(196),_=a(258),R=a(255),W=a(195),Y=a.n(W);const K=c.a.forwardRef((function(e,t){return Object(T.jsx)(R.a,{elevation:6,ref:t,variant:"filled",...e})})),Z=[{location:"Slope Base",latitude:44.5153,longitude:-125.39},{location:"Axial Base",latitude:45.8168,longitude:-129.754},{location:"Southern Hydrate",latitude:44.5691,longitude:-125.1479},{location:"Central Caldera",latitude:45.9546,longitude:-130.0089},{location:"Eastern Caldera",latitude:45.9396,longitude:-129.9738}],U={id:"10m-bathymetry-81bsvj",type:"fill",source:"10m-bathymetry-81bsvj","source-layer":"10m-bathymetry-81bsvj",layout:{},paint:{"fill-outline-color":"hsla(337, 82%, 62%, 0)","fill-color":["interpolate",["cubic-bezier",0,.5,1,.5],["get","DEPTH"],200,"#78bced",9e3,"#15659f"]}};var $=function(){const[e,t]=Object(n.useState)(null),{graphList:a=[]}=Object(s.c)((e=>e.graph)),[l,r]=Object(n.useState)(!1),[d,j]=Object(n.useState)("axial_base"),b=Object(s.b)(),[u,x]=c.a.useState(!0),m=Object(n.useMemo)((()=>Z.map(((e,a)=>Object(T.jsx)(J.b,{longitude:e.longitude,latitude:e.latitude,anchor:"bottom",onClick:a=>{a.originalEvent.stopPropagation(),t(e)},children:Object(T.jsx)(Y.a,{fontSize:"large"})},"marker-".concat(a))))),[]);return Object(T.jsxs)(J.e,{style:{height:"100vh"},initialViewState:{latitude:46.1651,longitude:-123.9237,zoom:6,bearing:0,pitch:0},mapStyle:"mapbox://styles/mapbox/streets-v11",mapboxAccessToken:"pk.eyJ1IjoiYW5kcmV3bGl1MTIzNCIsImEiOiJjbDVjNTZpa2swZTBsM2NtdGludmRqNGN3In0.3WcKjr2AOAzmio8bLvV_kg",children:[Object(T.jsx)(J.d,{id:"10m-bathymetry-81bsvj",type:"vector",url:"mapbox://mapbox.9tm8dx88",children:Object(T.jsx)(J.a,{...U})}),Object(T.jsx)(_.a,{open:u,autoHideDuration:4e3,onClose:(e,t)=>{x(!1)},children:Object(T.jsx)(K,{children:"Click 1 of the 5 pins to explore the Hydrophone!"})}),m,e&&Object(T.jsxs)(n.Fragment,{children:[Object(T.jsxs)(J.c,{anchor:"top",longitude:Number(e.longitude),latitude:Number(e.latitude),onClose:()=>t(null),children:[Object(T.jsx)(i.a,{sx:{fontSize:"16px",pb:1},children:"Loction:"}),Object(T.jsx)(i.a,{sx:{fontSize:"14px",pb:1},children:e.location}),Object(T.jsx)(o.a,{variant:"contained",color:"primary",size:"small",onClick:()=>((e,t)=>{r(e),j(t)})(!0,e.location),children:"Explore"})]}),l&&Object(T.jsx)(G,{currentLocation:d,graphData:a,handleClose:()=>{r(!1),b({type:S.a,payload:{}})},open:l})]})]})};t.default=()=>Object(T.jsx)($,{})}}]);