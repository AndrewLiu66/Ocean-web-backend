(this["webpackJsonpmatx-react-pro"]=this["webpackJsonpmatx-react-pro"]||[]).push([[6],{152:function(e,t,a){"use strict";a.d(t,"a",(function(){return n}));a(184);const n=e=>{if(e.match("rgba")){return e.slice(5).split(",").slice(0,-1).join(",")}let t;if(/^#([A-Fa-f0-9]{3}){1,2}$/.test(e))return t=e.substring(1).split(""),3===t.length&&(t=[t[0],t[0],t[1],t[1],t[2],t[2]]),t="0x"+t.join(""),[t>>16&255,t>>8&255,255&t].join(",")}},261:function(e,t,a){"use strict";a.r(t);var n=a(0),c=a.n(n),i=a(109),s=a(262),o=a(57),r=a(269),l=a(270),d=a(259),j=a(273),b=a(260),p=a(252),x=a(256),u=a(117),h=a(107),m=a(24),O=a(152),g=a(267),f=a(264),v=a(251),w=a(195),y=a(250),S=a(42),C=a(263),D=a(43),k=a.n(D),B=a(185),M=a.n(B),z=a(193),I=a.n(z),E=a(192),F=a.n(E),P=a(3);const T=Object(h.a)(i.a)((()=>({display:"flex",alignItems:"center",justifyContent:"center",margin:"24px !important",marginTop:"0px !important"}))),A=Object(h.a)(i.a)((()=>({display:"flex",alignItems:"center"}))),L=Object(h.a)(s.a)((e=>{let{theme:t}=e;return{width:"130px",marginRight:"10px",[t.breakpoints.down("sm")]:{fontSize:"12px"}}})),N=Object(h.a)(i.a)((e=>{let{theme:t}=e;return{display:"flex",alignItems:"center",width:"100%",padding:".8rem 1.25rem",justifyContent:"space-between",borderBottom:"1px solid ".concat("rgba(".concat(Object(O.a)(t.palette.text.disabled),", 0.2)"))}})),V=Object(h.a)(g.a)((e=>{let{theme:t}=e;return{[t.breakpoints.down("lg")]:{width:"90vw",height:"80vh"},[t.breakpoints.down("md")]:{width:"90vw",height:"85vh"},[t.breakpoints.down("sm")]:{width:"90vw",height:"90vh"}}})),q=Object(h.a)("img")((e=>{let{theme:t}=e;return{borderRadius:"4px",[t.breakpoints.down("sm")]:{width:"110%"}}})),G=Object(h.a)("div")((()=>({fontSize:"16px",fontWeight:"500",lineHeight:"1.5"}))),H=Object(h.a)("a")((()=>({display:"flex"})));var J=e=>{let{currentLocation:t,open:a,handleClose:c}=e;const[i,s]=Object(n.useState)(new Date(2018,1,1)),[h,O]=Object(n.useState)(new Date(2018,1,3)),{palette:g}=Object(m.a)(),D=Object(o.b)(),B=g.text.primary,[z,E]=Object(n.useState)("Spectrogram"),[J,_]=Object(n.useState)("Spectrogram"),{initGraph:R}=Object(o.c)((e=>e.graph)),[W,Y]=Object(n.useState)(!1),[Z,K]=Object(n.useState)(""),[U,$]=Object(n.useState)(50);Object(n.useEffect)((()=>{Y(!0);const e=t.replace(" ","_").toLowerCase();!async function(){await D(Object(S.d)(i,h,e))}()}),[]),Object(n.useEffect)((()=>{if("Spectrogram"===z||"Octave Band Median/Mean"===z){if(0!==Object.keys(R).length){Y(!1);const e=document.getElementById("outer"),t=document.createElement("div");return t.setAttribute("id","graphBox"),e.appendChild(t),window.Bokeh.embed.embed_item(R,"graphBox"),()=>{if(document.getElementById("graphBox")){document.getElementById("graphBox").remove()}}}}else if("SPDF"===z){Y(!1);let e=R.image.split("'")[1];K(e)}}),[R]);const Q=e=>e.getFullYear()+"/"+(e.getMonth()+1)+"/"+e.getDate();return console.log(Z),Object(P.jsx)(C.a,{open:a,sx:{zIndex:101},children:Object(P.jsxs)(V,{sx:{width:"70vw",height:"80vh",overflow:"scroll"},children:[Object(P.jsxs)(N,{children:[Object(P.jsxs)(G,{children:[t," Hydrophone Visualization"]}),Object(P.jsx)(r.a,{onClick:c,children:Object(P.jsx)(l.a,{sx:{color:B},children:"close"})})]}),Object(P.jsxs)(f.a,{container:!0,spacing:1,p:4,pb:0,sx:{"& .MuiTextField-root":{mb:1,width:"100%"}},children:[Object(P.jsx)(f.a,{item:!0,lg:3,md:3,sm:6,xs:12,children:Object(P.jsx)(w.a,{dateAdapter:v.a,children:Object(P.jsx)(y.a,{label:"Start Date",value:i,onChange:e=>{s(e)},minDate:new Date(2015,0,14),maxDate:new Date(2020,11,31),renderInput:e=>Object(P.jsx)(d.a,{...e})})})}),Object(P.jsx)(f.a,{item:!0,lg:3,md:3,sm:6,xs:12,children:Object(P.jsx)(w.a,{dateAdapter:v.a,children:Object(P.jsx)(y.a,{label:"End Date",value:h,onChange:e=>{O(e)},minDate:new Date(2015,0,14),maxDate:new Date(2020,11,31),renderInput:e=>Object(P.jsx)(d.a,{...e})})})}),Object(P.jsx)(f.a,{item:!0,lg:3,md:3,sm:6,xs:12,children:Object(P.jsxs)(j.a,{fullWidth:!0,sx:{mb:1,width:"100%"},children:[Object(P.jsx)(b.a,{id:"demo-simple-select-label",children:"Type"}),Object(P.jsxs)(p.a,{labelId:"demo-simple-select-label",id:"demo-simple-select",value:J,label:"Type",defaultValue:"Spectrogram",onChange:e=>{_(e.target.value)},children:[Object(P.jsx)(x.a,{value:"Spectrogram",children:"Spectrogram"}),Object(P.jsx)(x.a,{value:"SPDF",children:"SPDF"}),Object(P.jsx)(x.a,{value:"Octave Band Median/Mean",children:"Octave Band Median/Mean"})]})]})}),Object(P.jsx)(f.a,{item:!0,lg:3,md:3,sm:6,xs:12,children:"Octave Band Median/Mean"===J?Object(P.jsx)(d.a,{required:!0,value:U,id:"outlined-required",label:"Required frequency",onChange:e=>{$(e.target.value)}}):Object(P.jsx)(d.a,{disabled:!0,defaultValue:"0",id:"outlined-required",label:"No frequency needed"})})]}),Object(P.jsx)(f.a,{container:!0,spacing:1,p:4,pt:1,children:Object(P.jsx)(f.a,{item:!0,lg:6,md:6,sm:12,xs:12,children:Object(P.jsxs)(A,{children:[Object(P.jsxs)(L,{variant:"contained",component:"span",onClick:()=>{Y(!0),E(J);let e=i.getFullYear()+"-"+(i.getMonth()+1)+"-"+i.getDate(),a=h.getFullYear()+"-"+(h.getMonth()+1)+"-"+h.getDate();const n=t.replace(" ","_").toLowerCase();D(Object(S.e)(e,a,J,n,U))},children:[Object(P.jsx)(F.a,{sx:{mr:1}}),"Update"]}),Object(P.jsxs)(L,{variant:"contained",component:"span",onClick:()=>(()=>{const e=t.replace(" ","_").toLowerCase();k.a.post("/api/downloads",{startDate:i,endDate:h,location:e},{responseType:"blob"}).then((e=>{M()(e.data,"".concat(t+"-"+z+"-"+Q(i)+"-"+Q(h),".zip"))}))})(),sx:{backgroundColor:"#008255"},children:[Object(P.jsx)(I.a,{sx:{mr:1}}),"CSV"]}),"SPDF"===z&&"SPDF"===J&&!1===W?Object(P.jsx)(L,{variant:"contained",sx:{backgroundColor:"#008255"},children:Object(P.jsxs)(H,{href:"data:image/jpeg;base64,".concat(Z),download:"".concat(t+"-"+z+"-"+Q(i)+"-"+Q(h),".jpg"),children:[Object(P.jsx)(I.a,{sx:{mr:1}}),"JPG"]})}):Object(P.jsxs)(L,{disabled:!0,variant:"contained",sx:{backgroundColor:"#21b6ae"},children:[Object(P.jsx)(I.a,{sx:{mr:1}}),"JPG"]})]})})}),Object(P.jsxs)(f.a,{container:!0,children:[W&&Object(P.jsx)(f.a,{item:!0,lg:12,md:12,sm:12,xs:12,alignItems:"center",justifyContent:"center",textAlign:"center",mb:"20px",children:Object(P.jsx)(u.a,{size:24,className:"buttonProgress"})}),Object(P.jsx)(f.a,{item:!0,lg:12,md:12,sm:12,xs:12,children:"SPDF"===z&&""!==Z&&Object(P.jsx)(T,{children:Object(P.jsx)(q,{src:"data:image/jpg;base64,".concat(Z)})})})]}),("Spectrogram"===z||"Octave Band Median/Mean"===z)&&Object(P.jsx)(T,{sx:{overflow:"auto"},id:"outer"})]})})},_=a(194),R=a(257),W=a(254);const Y={cursor:"pointer",fill:"#db6607",stroke:"none"};class Z extends n.PureComponent{render(){const{size:e=20,onClick:t}=this.props;return Object(P.jsx)("svg",{height:e,viewBox:"0 0 24 24",style:{...Y,transform:"translate(".concat(-e/2,"px,").concat(-e,"px)")},onClick:t,children:Object(P.jsx)("path",{d:"M20.2,15.7L20.2,15.7c1.1-1.6,1.8-3.6,1.8-5.7c0-5.6-4.5-10-10-10S2,4.5,2,10c0,2,0.6,3.9,1.6,5.4c0,0.1,0.1,0.2,0.2,0.3\n  c0,0,0.1,0.1,0.1,0.2c0.2,0.3,0.4,0.6,0.7,0.9c2.6,3.1,7.4,7.6,7.4,7.6s4.8-4.5,7.4-7.5c0.2-0.3,0.5-0.6,0.7-0.9\n  C20.1,15.8,20.2,15.8,20.2,15.7z"})})}}const K=c.a.forwardRef((function(e,t){return Object(P.jsx)(W.a,{elevation:6,ref:t,variant:"filled",...e})})),U=[{location:"Slope Base",latitude:44.5153,longitude:-125.39},{location:"Axial Base",latitude:45.8168,longitude:-129.754},{location:"Southern Hydrate",latitude:44.5691,longitude:-125.1479},{location:"Central Caldera",latitude:45.9546,longitude:-130.0089},{location:"Eastern Caldera",latitude:45.9396,longitude:-129.9738}],$={id:"10m-bathymetry-81bsvj",type:"fill",source:"10m-bathymetry-81bsvj","source-layer":"10m-bathymetry-81bsvj",layout:{},paint:{"fill-outline-color":"hsla(337, 82%, 62%, 0)","fill-color":["interpolate",["cubic-bezier",0,.5,1,.5],["get","DEPTH"],200,"#78bced",9e3,"#15659f"]}};var Q=function(){const[e,t]=Object(n.useState)(null),{graphList:a=[]}=Object(o.c)((e=>e.graph)),[r,l]=Object(n.useState)(!1),[d,j]=Object(n.useState)("axial_base"),b=Object(o.b)(),[p,x]=c.a.useState(!0),u=Object(n.useMemo)((()=>U.map(((e,a)=>Object(P.jsx)(_.b,{longitude:e.longitude,latitude:e.latitude,anchor:"bottom",onClick:a=>{a.originalEvent.stopPropagation(),t(e)},children:Object(P.jsx)(Z,{size:18})},"marker-".concat(a))))),[]);return Object(P.jsxs)(_.e,{style:{height:"100vh"},initialViewState:{latitude:46.1651,longitude:-123.9237,zoom:6,bearing:0,pitch:0},mapStyle:"mapbox://styles/mapbox/streets-v11",mapboxAccessToken:"pk.eyJ1IjoiYW5kcmV3bGl1MTIzNCIsImEiOiJjbDVjNTZpa2swZTBsM2NtdGludmRqNGN3In0.3WcKjr2AOAzmio8bLvV_kg",children:[Object(P.jsx)(_.d,{id:"10m-bathymetry-81bsvj",type:"vector",url:"mapbox://mapbox.9tm8dx88",children:Object(P.jsx)(_.a,{...$})}),Object(P.jsx)(R.a,{open:p,autoHideDuration:4e3,onClose:(e,t)=>{x(!1)},children:Object(P.jsx)(K,{children:"Click 1 of the 5 pins to explore the Hydrophone!"})}),u,e&&Object(P.jsxs)(n.Fragment,{children:[Object(P.jsxs)(_.c,{anchor:"top",longitude:Number(e.longitude),latitude:Number(e.latitude),onClose:()=>t(null),children:[Object(P.jsx)(i.a,{sx:{fontSize:"16px",pb:1},children:"Loction:"}),Object(P.jsx)(i.a,{sx:{fontSize:"14px",pb:1},children:e.location}),Object(P.jsx)(s.a,{variant:"contained",color:"primary",size:"small",onClick:()=>((e,t)=>{l(e),j(t)})(!0,e.location),children:"Explore"})]}),r&&Object(P.jsx)(J,{currentLocation:d,graphData:a,handleClose:()=>{l(!1),b({type:S.b,payload:{}})},open:r})]})]})};t.default=()=>Object(P.jsx)(Q,{})}}]);