(this["webpackJsonpmatx-react-pro"]=this["webpackJsonpmatx-react-pro"]||[]).push([[6],{145:function(e,t,a){"use strict";a.d(t,"a",(function(){return s})),a.d(t,"b",(function(){return r})),a.d(t,"c",(function(){return d})),a.d(t,"d",(function(){return j}));var n=a(34),i=(a(0),a(35)),o=a(236),c=a(3);const l=Object(i.a)(o.a)((e=>{let{theme:t,textTransformStyle:a,ellipsis:n}=e;return{textTransform:a||"none",whiteSpace:n?"nowrap":"normal",overflow:n?"hidden":"",textOverflow:n?"ellipsis":""}})),s=e=>{let{children:t,className:a,ellipsis:i,textTransform:o,...s}=e;return Object(c.jsx)(l,{textTransformStyle:o,ellipsis:i,className:Object(n.a)({[a||""]:!0}),component:"h3",mb:0,mt:0,fontSize:"18px",fontWeight:"500",lineHeight:"1.5",...s,children:t})},r=e=>{let{children:t,className:a,ellipsis:i,textTransform:o,...s}=e;return Object(c.jsx)(l,{textTransformStyle:o,ellipsis:i,className:Object(n.a)({[a||""]:!0}),component:"h4",mb:0,mt:0,fontSize:"16px",fontWeight:"500",lineHeight:"1.5",...s,children:t})},d=e=>{let{children:t,className:a,ellipsis:i,textTransform:o,...s}=e;return Object(c.jsx)(l,{textTransformStyle:o,ellipsis:i,className:Object(n.a)({[a||""]:!0}),component:"p",mb:0,mt:0,fontSize:"14px",...s,children:t})},j=e=>{let{children:t,className:a,ellipsis:i,textTransform:o,...s}=e;return Object(c.jsx)(l,{textTransformStyle:o,ellipsis:i,className:Object(n.a)({[a||""]:!0}),component:"span",lineHeight:"1.5",...s,children:t})}},153:function(e,t,a){"use strict";a.d(t,"a",(function(){return n}));a(183);const n=e=>{if(e.match("rgba")){return e.slice(5).split(",").slice(0,-1).join(",")}let t;if(/^#([A-Fa-f0-9]{3}){1,2}$/.test(e))return t=e.substring(1).split(""),3===t.length&&(t=[t[0],t[0],t[1],t[1],t[2],t[2]]),t="0x"+t.join(""),[t>>16&255,t>>8&255,255&t].join(",")}},265:function(e,t,a){"use strict";a.r(t);var n=a(0),i=a.n(n),o=a(109),c=a(263),l=a(57),s=a(269),r=a(270),d=a(259),j=a(273),m=a(260),b=a(252),p=a(256),u=a(117),x=a(107),h=a(24),g=a(153),O=a(267),f=a(262),y=a(145),w=a(251),S=a(195),v=a(250),_=a(42),k=a(261),C=a(43),D=a.n(C),T=a(184),N=a.n(T),A=a(3);const I=Object(x.a)(o.a)((()=>({display:"flex",alignItems:"center",justifyContent:"center",margin:"24px !important",marginTop:"0px !important"}))),z=Object(x.a)(o.a)((()=>({display:"flex",alignItems:"center"}))),B=Object(x.a)(o.a)((e=>{let{theme:t}=e;return{display:"flex",alignItems:"center",width:"100%",padding:".8rem 1.25rem",justifyContent:"space-between",borderBottom:"1px solid ".concat("rgba(".concat(Object(g.a)(t.palette.text.disabled),", 0.2)"))}})),M=Object(x.a)(O.a)((e=>{let{theme:t}=e;return{[t.breakpoints.down("sm")]:{maxWidth:460}}})),E=Object(x.a)("img")((()=>({width:"100%",borderRadius:"4px"})));var L=e=>{let{currentLocation:t,open:a,handleClose:i}=e;const[x,g]=Object(n.useState)(new Date(2018,1,1)),[O,C]=Object(n.useState)(new Date(2018,1,3)),{palette:T}=Object(h.a)(),L=Object(l.b)(),F=T.text.primary,[H,P]=Object(n.useState)("Spectrogram"),[V,G]=Object(n.useState)("Spectrogram"),{initGraph:W}=Object(l.c)((e=>e.graph)),[q,J]=Object(n.useState)(!1),[R,Y]=Object(n.useState)(""),[Z,K]=Object(n.useState)(50);Object(n.useEffect)((()=>{J(!0);const e=t.replace(" ","_").toLowerCase();!async function(){await L(Object(_.d)(x,O,e))}()}),[]),Object(n.useEffect)((()=>{if("Spectrogram"===H){if(0!==Object.keys(W).length){J(!1);const e=document.getElementById("outer"),t=document.createElement("div");return t.setAttribute("id","graphBox"),e.appendChild(t),window.Bokeh.embed.embed_item(W,"graphBox"),()=>{if(document.getElementById("graphBox")){document.getElementById("graphBox").remove()}}}}else if("SPDF"===H){J(!1);let e=W.image.split("'")[1];Y(e)}}),[W]);const U=e=>e.getFullYear()+"/"+(e.getMonth()+1)+"/"+e.getDate();return Object(A.jsx)(k.a,{open:a,sx:{zIndex:101},children:Object(A.jsxs)(M,{sx:{maxWidth:"50%"},children:[Object(A.jsxs)(B,{children:[Object(A.jsxs)(y.a,{children:[t," Hydrophone Visualization"]}),Object(A.jsx)(s.a,{onClick:i,children:Object(A.jsx)(r.a,{sx:{color:F},children:"close"})})]}),Object(A.jsxs)(f.a,{container:!0,spacing:2,p:4,pb:0,children:[Object(A.jsx)(f.a,{item:!0,md:3,sm:12,xs:12,children:Object(A.jsx)(S.a,{dateAdapter:w.a,children:Object(A.jsx)(v.a,{label:"Start Date",value:x,onChange:e=>{g(e)},minDate:new Date(2015,0,14),maxDate:new Date(2020,11,31),renderInput:e=>Object(A.jsx)(d.a,{...e})})})}),Object(A.jsx)(f.a,{item:!0,md:3,sm:12,xs:12,children:Object(A.jsx)(S.a,{dateAdapter:w.a,children:Object(A.jsx)(v.a,{label:"End Date",value:O,onChange:e=>{C(e)},minDate:new Date(2015,0,14),maxDate:new Date(2020,11,31),renderInput:e=>Object(A.jsx)(d.a,{...e})})})}),Object(A.jsx)(f.a,{item:!0,md:3,sm:12,xs:12,children:Object(A.jsx)(o.a,{children:Object(A.jsxs)(j.a,{fullWidth:!0,children:[Object(A.jsx)(m.a,{id:"demo-simple-select-label",children:"Type"}),Object(A.jsxs)(b.a,{labelId:"demo-simple-select-label",id:"demo-simple-select",value:V,label:"Type",defaultValue:"Spectrogram",onChange:e=>{G(e.target.value)},children:[Object(A.jsx)(p.a,{value:"Spectrogram",children:"Spectrogram"}),Object(A.jsx)(p.a,{value:"SPDF",children:"SPDF"}),Object(A.jsx)(p.a,{value:"Octave Band Median/Mean",children:"Octave Band Median/Mean"})]})]})})}),Object(A.jsx)(f.a,{item:!0,md:3,sm:12,xs:12,children:Object(A.jsx)(o.a,{children:Object(A.jsx)(d.a,{required:!0,value:Z,id:"outlined-required",label:"Required frequency",defaultValue:"50",onChange:e=>{K(e.target.value)}})})}),Object(A.jsx)(f.a,{item:!0,md:12,sm:12,xs:12,children:Object(A.jsxs)(z,{sx:{mt:1},children:[Object(A.jsx)(c.a,{variant:"contained",component:"span",onClick:()=>{console.log(Z),J(!0),P(V);let e=x.getFullYear()+"-"+(x.getMonth()+1)+"-"+x.getDate(),a=O.getFullYear()+"-"+(O.getMonth()+1)+"-"+O.getDate();const n=t.replace(" ","_").toLowerCase();L(Object(_.e)(e,a,V,n))},children:"Update Graph"}),Object(A.jsx)(c.a,{variant:"contained",component:"span",onClick:()=>(()=>{const e=t.replace(" ","_").toLowerCase();D.a.post("/api/downloads",{startDate:x,endDate:O,location:e},{responseType:"blob"}).then((e=>{N()(e.data,"".concat(t+"-"+H+"-"+U(x)+"-"+U(O),".zip"))}))})(),sx:{backgroundColor:"#21b6ae",ml:1},children:"Download CSV"}),"SPDF"===H&&Object(A.jsx)(c.a,{variant:"contained",sx:{backgroundColor:"#21b6ae",mt:1,ml:1},children:Object(A.jsx)("a",{href:"data:image/jpeg;base64,".concat(R),download:"".concat(t+"-"+H+"-"+U(x)+"-"+U(O),".jpg"),children:"Download .jpg"})})]})}),Object(A.jsx)(f.a,{item:!0,md:3,sm:12,xs:12}),q&&Object(A.jsx)(f.a,{item:!0,md:12,sm:12,xs:12,alignItems:"center",justifyContent:"center",textAlign:"center",ml:"-18px",children:Object(A.jsx)(u.a,{size:24,className:"buttonProgress"})}),Object(A.jsx)(f.a,{item:!0,md:12,sm:12,xs:12,children:"SPDF"===H&&""!==R&&Object(A.jsx)(I,{children:Object(A.jsx)(E,{src:"data:image/jpg;base64,".concat(R)})})})]}),("Spectrogram"===H||"Octave Band Median/Mean"===H)&&Object(A.jsx)(I,{sx:{overflow:"auto"},id:"outer"})]})})},F=a(194),H=a(191),P=a.n(H),V=a(257),G=a(253);const W=i.a.forwardRef((function(e,t){return Object(A.jsx)(G.a,{elevation:6,ref:t,variant:"filled",...e})})),q=[{location:"Slope Base",image:"http://upload.wikimedia.org/wikipedia/commons/thumb/b/b9/Above_Gotham.jpg/240px-Above_Gotham.jpg",latitude:44.5153,longitude:-125.39},{location:"Axial Base",image:"http://upload.wikimedia.org/wikipedia/commons/thumb/5/57/LA_Skyline_Mountains2.jpg/240px-LA_Skyline_Mountains2.jpg",latitude:45.8168,longitude:-129.754},{location:"Southern Hydrate",image:"http://upload.wikimedia.org/wikipedia/commons/thumb/8/85/2008-06-10_3000x1000_chicago_skyline.jpg/240px-2008-06-10_3000x1000_chicago_skyline.jpg",latitude:44.5691,longitude:-125.1479},{location:"Central Caldera",image:"http://upload.wikimedia.org/wikipedia/commons/thumb/6/60/Aerial_views_of_the_Houston%2C_Texas%2C_28005u.jpg/240px-Aerial_views_of_the_Houston%2C_Texas%2C_28005u.jpg",latitude:45.9546,longitude:-130.0089},{location:"Eastern Caldera",image:"http://upload.wikimedia.org/wikipedia/commons/thumb/b/b9/Downtown_Phoenix_Aerial_Looking_Northeast.jpg/207px-Downtown_Phoenix_Aerial_Looking_Northeast.jpg",latitude:45.9396,longitude:-129.9738}],J={id:"10m-bathymetry-81bsvj",type:"fill",source:"10m-bathymetry-81bsvj","source-layer":"10m-bathymetry-81bsvj",layout:{},paint:{"fill-outline-color":"hsla(337, 82%, 62%, 0)","fill-color":["interpolate",["cubic-bezier",0,.5,1,.5],["get","DEPTH"],200,"#78bced",9e3,"#15659f"]}};var R=function(){const[e,t]=Object(n.useState)(null),{graphList:a=[]}=Object(l.c)((e=>e.graph)),[s,r]=Object(n.useState)(!1),[d,j]=Object(n.useState)("axial_base"),m=Object(l.b)(),[b,p]=i.a.useState(!0),u=Object(n.useMemo)((()=>q.map(((e,a)=>Object(A.jsx)(F.b,{longitude:e.longitude,latitude:e.latitude,anchor:"bottom",onClick:a=>{a.originalEvent.stopPropagation(),t(e)},children:Object(A.jsx)(P.a,{sx:{color:"#35068c"},fontSize:"large"})},"marker-".concat(a))))),[]);return Object(A.jsxs)(F.e,{style:{height:"100vh"},initialViewState:{latitude:46.1651,longitude:-123.9237,zoom:6,bearing:0,pitch:0},mapStyle:"mapbox://styles/mapbox/streets-v11",mapboxAccessToken:"pk.eyJ1IjoiYW5kcmV3bGl1MTIzNCIsImEiOiJjbDVjNTZpa2swZTBsM2NtdGludmRqNGN3In0.3WcKjr2AOAzmio8bLvV_kg",children:[Object(A.jsx)(F.d,{id:"10m-bathymetry-81bsvj",type:"vector",url:"mapbox://mapbox.9tm8dx88",children:Object(A.jsx)(F.a,{...J})}),Object(A.jsx)(V.a,{open:b,autoHideDuration:1e4,onClose:(e,t)=>{p(!1)},children:Object(A.jsx)(W,{children:"Click 1 of the 5 pins to explore the Hydrophone!"})}),u,e&&Object(A.jsxs)(n.Fragment,{children:[Object(A.jsxs)(F.c,{anchor:"top",longitude:Number(e.longitude),latitude:Number(e.latitude),onClose:()=>t(null),children:[Object(A.jsx)(o.a,{sx:{fontSize:"16px"},children:"Loction:"}),Object(A.jsx)(o.a,{sx:{fontSize:"14px"},children:e.location}),Object(A.jsx)(c.a,{variant:"contained",color:"primary",size:"small",onClick:()=>((e,t)=>{r(e),j(t)})(!0,e.location),children:"Explore"})]}),s&&Object(A.jsx)(L,{currentLocation:d,graphData:a,handleClose:()=>{r(!1),m({type:_.b,payload:{}})},open:s})]})]})};t.default=()=>Object(A.jsx)(R,{})}}]);